<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tanda Terima {{ payment }}</title>
    <style>
        *, *::before, *::after {
            position: relative;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: normal;
            color: color-mix(in oklab, color-mix(in oklab, #000, #fff 12.5%), #0f0 12.5%);
            fill: currentColor;
            object-fit: cover;
            border: none;
            color-scheme: light;
        }
        body {
            display: flex;
            flex-direction: column;
            justify-content: start;
            align-items: start;
            gap: 16px;
            padding: 4vh 4vw;
            /* background: color-mix(in oklab, #fff, #0f0 12.5%); */
        }
        h1 {
            font-size: 24px;
        }
        body > h1:first-child {
            align-self: center;
        }
        h2 {
            font-size: 20px;
        }
        p {
            font-size: 16px;
        }
        p:empty {
            height: 0;
        }
        .bolder {
            font-weight: 600;
        }
        .bold {
            font-weight: 700;
        }
        .align-end {
            text-align: end;
        }
        .align-center {
            text-align: center;
        }
        .first-letter-upper::first-letter {
            text-transform: uppercase;
        }
        span.indent:empty {
            display: inline-block;
            width: 16px;
        }
        :not(span).indent {
            margin-left: 16px;
        }
        table {
            border-spacing: 0;
        }
        table > :is(thead, tbody) > tr:not(:last-child) > :is(th, td) > * {
            margin-bottom: 16px;
        }
        table.border {
            border-collapse: collapse;
        }
        table.border > :is(thead, tbody) > tr > :is(th, td) {
            border: 1px solid #000;
        }
        table.border > :is(thead, tbody) > tr > :is(th, td) > * {
            margin: 8px 4px;
        }
        body > div {
            display: flex;
            flex-direction: column;
            justify-content: start;
            align-items: start;
            gap: 8px;
        }
        table.w-full {
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Tanda Terima Pembayaran</h1>
    <p>Telah diterima pembayaran dari&colon;</p>
    <table class="indent">
        <tbody>
            <tr>
                <td><p><span class="bolder">Nama</span></p></td>
                <td><p>&colon;&nbsp;</p></td>
                <td><p class="indent">{{ payer_name }}</p></td>
            </tr>
            <tr>
                <td><p><span class="bolder">No. HP</span></p></td>
                <td><p>&colon;&nbsp;</p></td>
                <td><p class="indent">{{ payer_number or '-' }}</p></td>
            </tr>
            <!-- <tr>
                <td><p><span class="bolder">Email</span></p></td>
                <td><p>&colon;&nbsp;</p></td>
                <td><p class="indent">{{ payer_email or '-' }}</p></td>
            </tr> -->
            <tr>
                <td><p><span class="bolder">Alamat</span></p></td>
                <td><p>&colon;&nbsp;</p></td>
                <td><p class="indent">{{ payer_address }}</p></td>
            </tr>
            <tr>
                <td><p><span class="bolder">Hari/tanggal</span></p></td>
                <td><p>&colon;&nbsp;</p></td>
                <td><p class="indent">{{ created_at }}</p></td>
            </tr>
        </tbody>
    </table>
    <p>dengan rincian sebagai berikut&colon;</p>
    <table class="border w-full">
        <thead>
            <tr>
                <th><p class="bolder">No.</p></th>
                <th><p class="bolder">Nama</p></th>
                <th><p class="bolder">Kategori</p></th>
                {% for unit in units %}
                <th><p class="bolder first-letter-upper">{{ unit }}</p></th>
                {% endfor %}
                <th><p class="bolder">Catatan</p></th>
            </tr>
        </thead>
        <tbody>
            {% for line in lines %}
            <tr>
                <td><p class="align-end">{{ loop.index }}</p></td>
                <td><p>{{ line.payer_name }}</p></td>
                <td><p class="first-letter-upper">{{ line.category }}</p></td>
                {% for unit in units %}
                <td><p class="align-end">{{ format_number((line.amount | int) if (line.amount | int) == line.amount else line.amount) if line.unit == unit else '' }}</p></td>
                {% endfor %}
                <td><p>{{ line.note or '-' }}</p></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="indent">
        <p><span class="bolder">Catatan</span>&colon;</p>
        <p>{{ note or '-' }}</p>
    </div>
    <table class="border w-full">
        <tbody>
            <tr>
                <th rowspan="2"><p class="bolder">Total</p></th>
                {% for total in totals %}
                <th><p class="bolder first-letter-upper">{{ total }}</p></th>
                {% endfor %}
            </tr>
            <tr>
                {% for total in totals.values() %}
                <td><p class="align-center">{{ format_number((total | int) if (total | int) == total else total) }}</p></td>
                {% endfor %}
            </tr>
        </tbody>
    </table>
    <table>
        <tbody>
            <tr>
                <td><p><span class="bolder">Diterima oleh</span></p></td>
                <td><p>&colon;&nbsp;</p></td>
                <td><p class="indent">Masjid Al-Hasanah Meruya</p></td>
            </tr>
            <tr>
                <td><p><span class="bolder">Admin</span></p></td>
                <td><p>&colon;&nbsp;</p></td>
                <td><p class="indent">{{ created_by }}{{ (' (data diperbarui oleh ' + updated_by + ')') if created_by != updated_by else ''}}</p></td>
            </tr>
            <tr>
                <td><p><span class="bolder">UUID</span></p></td>
                <td><p>&colon;&nbsp;</p></td>
                <td><p class="indent">{{ payment }}</p></td>
            </tr>
        </tbody>
    </table>
</body>
</html>